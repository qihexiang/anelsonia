<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Freesia - v2.0.1</title><meta name="description" content="Documentation for Freesia - v2.0.1"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Freesia - v2.0.1</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>Freesia - v2.0.1</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#freesia-a-typescript-library-for-building-nodejs-http-servers" id="freesia-a-typescript-library-for-building-nodejs-http-servers" style="color: inherit; text-decoration: none;">
  <h1>Freesia: a TypeScript library for building Node.js HTTP servers.</h1>
</a>
<p>Freesia is a library for building Node.js HTTP servers, it provides a way to describe you HTTP handling process in a functional way.</p>

<a href="#installing" id="installing" style="color: inherit; text-decoration: none;">
  <h2>Installing</h2>
</a>
<p>Install freesia into your project by a package manager, like NPM:</p>
<pre><code class="language-sh"><span class="hl-0">npm install freesia</span>
</code></pre>
<p>This package contains built-in TypeScript declarations, you don&#39;t need any other packages to support it. But in practice, it&#39;s recommended to install <code>@types/node</code> as a developing dependency.</p>
<p>This package is also a dual-module package, you can use it in a CommonJS or a ESM project.</p>
<p>In CommonJS</p>
<pre><code class="language-js"><span class="hl-2">const</span><span class="hl-0"> { </span><span class="hl-3">shimHTTP</span><span class="hl-0"> } = </span><span class="hl-4">require</span><span class="hl-0">(</span><span class="hl-1">&quot;freesia&quot;</span><span class="hl-0">);</span>
</code></pre>
<p>In ESM and TypeScript</p>
<pre><code class="language-js"><span class="hl-5">import</span><span class="hl-0"> { </span><span class="hl-6">shimHTTP</span><span class="hl-0"> } </span><span class="hl-5">from</span><span class="hl-0"> </span><span class="hl-1">&quot;freesia&quot;</span><span class="hl-0">;</span>
</code></pre>

<a href="#hello-world" id="hello-world" style="color: inherit; text-decoration: none;">
  <h2>Hello World</h2>
</a>
<pre><code class="language-js"><span class="hl-7">// app.js</span><br/><span class="hl-5">import</span><span class="hl-0"> { </span><span class="hl-6">shimHTTP</span><span class="hl-0">, </span><span class="hl-6">response</span><span class="hl-0"> } </span><span class="hl-5">from</span><span class="hl-0"> </span><span class="hl-1">&quot;freesia&quot;</span><span class="hl-0">;</span><br/><span class="hl-5">import</span><span class="hl-0"> { </span><span class="hl-6">createServer</span><span class="hl-0"> } </span><span class="hl-5">from</span><span class="hl-0"> </span><span class="hl-1">&quot;http&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-4">main</span><span class="hl-0"> = </span><span class="hl-2">async</span><span class="hl-0"> (</span><span class="hl-6">req</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">&quot;hello, world&quot;</span><span class="hl-0">);</span><br/><span class="hl-4">createServer</span><span class="hl-0">(</span><span class="hl-4">shimHTTP</span><span class="hl-0">(</span><span class="hl-6">main</span><span class="hl-0">)).</span><span class="hl-4">listen</span><span class="hl-0">(</span><span class="hl-8">8080</span><span class="hl-0">);</span>
</code></pre>
<p>Run it with <code>node app.js</code>, and then visit <a href="http://localhost:8080">http://localhost:8080</a>, you&#39;ll see the <code>&quot;hello, world&quot;</code> message.</p>
<p>In this example, we find that <code>shimHTTP</code> function transform a function into a http request handler, the function we give is the <code>EntryPoint</code> of a Freesia app. <code>EntryPoint</code> is the type of function which parameter is the request body from <code>http</code>/<code>https</code>/<code>http2</code> module, and return a <code>Respond&lt;string|Uint8Array|Readable&gt;</code> tuple.</p>

<a href="#concepts" id="concepts" style="color: inherit; text-decoration: none;">
  <h2>Concepts</h2>
</a>

<a href="#bootstrap-process" id="bootstrap-process" style="color: inherit; text-decoration: none;">
  <h3>Bootstrap process</h3>
</a>
<p>Http servers are always designed in event-driven architecture, which means the code we write is in fact a &quot;bootstrap code&quot;: it will be executed directly, create port listener, prepare resources(for example, connect to a database), define handler functions and bind them to events.</p>
<p>In a bootstrap process, the handler function won&#39;t be called, they are used as values which tell the server what to do when requests come in.</p>

<a href="#request-handling-process" id="request-handling-process" style="color: inherit; text-decoration: none;">
  <h3>Request handling process</h3>
</a>
<p>After the bootstrap process finished, the server will keep running and waiting requests come in. If a request comes in, it will call the handler function to deal with this request. <a href="#hooks">Freesia hooks</a> and router functions created by <a href="#routing">Routing</a> functions can be called only in request handling process.</p>

<a href="#respond" id="respond" style="color: inherit; text-decoration: none;">
  <h2>Respond</h2>
</a>
<p><code>Respond&lt;T&gt;</code> is a tuple that can define a response, it includes 3 parts: a body of type <code>T</code>, status and http headers.</p>

<a href="#respond-body" id="respond-body" style="color: inherit; text-decoration: none;">
  <h3>Respond body</h3>
</a>
<p>The first element of the tuple is the body of the response, it can be any type specified by template type <code>T</code>, or <code>undefined</code> if you&#39;d like to response nothing.</p>

<a href="#respond-status" id="respond-status" style="color: inherit; text-decoration: none;">
  <h3>Respond status</h3>
</a>
<p>The second element of the tuple is the status of the response, it can be a http status code, for example <code>200</code>, or a status code with custom status text like <code>[200, &quot;Success&quot;]</code>.</p>

<a href="#respond-http-headers" id="respond-http-headers" style="color: inherit; text-decoration: none;">
  <h3>Respond http headers</h3>
</a>
<p>Elements after the second element are http headers, headers can be defined as <code>Record&lt;string, string | string[]&gt;</code>. For example, such two patterns have the same result:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res1</span><span class="hl-0">: </span><span class="hl-9">Respond</span><span class="hl-0">&lt;</span><span class="hl-9">string</span><span class="hl-0">&gt; = [</span><br/><span class="hl-0">    </span><span class="hl-1">&quot;hello, world&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-8">200</span><span class="hl-0">,</span><br/><span class="hl-0">    { </span><span class="hl-1">&quot;Content-Type&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;text/plain&quot;</span><span class="hl-0">, </span><span class="hl-1">&quot;Content-Length&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;12&quot;</span><span class="hl-0"> },</span><br/><span class="hl-0">];</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res2</span><span class="hl-0">: </span><span class="hl-9">Respond</span><span class="hl-0">&lt;</span><span class="hl-9">string</span><span class="hl-0">&gt; = [</span><br/><span class="hl-0">    </span><span class="hl-1">&quot;hello, world&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-8">200</span><span class="hl-0">,</span><br/><span class="hl-0">    { </span><span class="hl-1">&quot;Content-Type&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;text/plain&quot;</span><span class="hl-0"> },</span><br/><span class="hl-0">    { </span><span class="hl-1">&quot;Content-Length&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;12&quot;</span><span class="hl-0"> },</span><br/><span class="hl-0">];</span>
</code></pre>
<p>Element with higher index will have higher priority when header names duplicated. For example:</p>
<pre><code class="language-ts"><span class="hl-0">[</span><br/><span class="hl-0">    </span><span class="hl-1">&quot;hello, world&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-8">200</span><span class="hl-0">,</span><br/><span class="hl-0">    { </span><span class="hl-1">&quot;Content-Type&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;text/html&quot;</span><span class="hl-0">, </span><span class="hl-1">&quot;Content-Length&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;12&quot;</span><span class="hl-0"> },</span><br/><span class="hl-0">    { </span><span class="hl-1">&quot;Content-Type&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;text/plain&quot;</span><span class="hl-0"> },</span><br/><span class="hl-0">];</span>
</code></pre>
<p>This Respond will be response with header <code>Content-Type: text/plain</code>.</p>

<a href="#response-function" id="response-function" style="color: inherit; text-decoration: none;">
  <h3>response function</h3>
</a>
<p>It&#39;s not difficult to create a <code>Respond&lt;T&gt;</code> manually, but function <code>response</code> provide an another way.</p>
<p>Follow examples can create a <code>Respond&lt;T&gt;</code>:</p>
<pre><code class="language-ts"><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">&quot;hello, world&quot;</span><span class="hl-0">); </span><span class="hl-7">// [ &#39;hello, world&#39;, 200 ]</span><br/><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-2">undefined</span><span class="hl-0">); </span><span class="hl-7">// [ undefined, 204 ]</span><br/><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">&quot;hello, world&quot;</span><span class="hl-0">, </span><span class="hl-8">200</span><span class="hl-0">, { </span><span class="hl-1">&quot;Content-Type&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;text/plain&quot;</span><span class="hl-0"> }); </span><span class="hl-7">// [ &#39;hello, world&#39;, 200, { &#39;Content-Type&#39;: &#39;text/plain&#39; } ]</span>
</code></pre>
<p><code>response</code> method can attach http headers to an existed <code>Respond</code>:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res</span><span class="hl-0"> = </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">&quot;hello, world&quot;</span><span class="hl-0">); </span><span class="hl-7">// [ &#39;hello, world&#39;, 200 ]</span><br/><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-6">res</span><span class="hl-0">, { </span><span class="hl-1">&quot;Content-Type&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;text/plain&quot;</span><span class="hl-0">, </span><span class="hl-1">&quot;Content-Length&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;12&quot;</span><span class="hl-0"> });</span><br/><span class="hl-7">// [</span><br/><span class="hl-7">//   &#39;hello, world&#39;,</span><br/><span class="hl-7">//   200,</span><br/><span class="hl-7">//   { &#39;Content-Type&#39;: &#39;text/plain&#39;, &#39;Content-Length&#39;: &#39;12&#39; }</span><br/><span class="hl-7">// ]</span>
</code></pre>
<p>It also provide a way to rebuild another Respond from existed Respond:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res</span><span class="hl-0"> = </span><span class="hl-4">response</span><span class="hl-0">&lt;{ </span><span class="hl-6">message</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0"> }&gt;({ </span><span class="hl-6">message:</span><span class="hl-0"> </span><span class="hl-1">`hello, world`</span><span class="hl-0"> }, </span><span class="hl-8">200</span><span class="hl-0">);</span><br/><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-6">res</span><span class="hl-0">, (</span><span class="hl-6">body</span><span class="hl-0">, </span><span class="hl-6">status</span><span class="hl-0">, </span><span class="hl-6">headers</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-5">return</span><span class="hl-0"> </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-9">JSON</span><span class="hl-0">.</span><span class="hl-4">stringify</span><span class="hl-0">(</span><span class="hl-6">body</span><span class="hl-0">), </span><span class="hl-6">status</span><span class="hl-0">, ...</span><span class="hl-6">headers</span><span class="hl-0">, {</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;Content-Type&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;application/json&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    });</span><br/><span class="hl-0">});</span><br/><span class="hl-7">// [</span><br/><span class="hl-7">//   &#39;{&quot;message&quot;:&quot;hello, world&quot;}&#39;,</span><br/><span class="hl-7">//   200,</span><br/><span class="hl-7">//   { &#39;Content-Type&#39;: &#39;application/json&#39; }</span><br/><span class="hl-7">// ]</span>
</code></pre>
<p>It&#39;s useful in <code>EntryPoint</code> function because the body type must be binary-like (<code>string | Uint8Array | Readable</code>).</p>
<p>Rebuild with asynchronous rebuilders will give a Promised Respond.</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res</span><span class="hl-0"> = </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">&quot;./README.md&quot;</span><span class="hl-0">, </span><span class="hl-8">200</span><span class="hl-0">);</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">resAsync</span><span class="hl-0"> = </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-6">res</span><span class="hl-0">, </span><span class="hl-2">async</span><span class="hl-0"> (</span><span class="hl-6">body</span><span class="hl-0">, </span><span class="hl-6">status</span><span class="hl-0">, </span><span class="hl-6">headers</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-5">return</span><span class="hl-0"> </span><span class="hl-4">response</span><span class="hl-0">(</span><br/><span class="hl-0">        </span><span class="hl-5">await</span><span class="hl-0"> </span><span class="hl-6">fs</span><span class="hl-0">.</span><span class="hl-6">promises</span><span class="hl-0">.</span><span class="hl-4">readFile</span><span class="hl-0">(</span><span class="hl-6">url</span><span class="hl-0">, { </span><span class="hl-6">encoding:</span><span class="hl-0"> </span><span class="hl-1">&quot;utf-8&quot;</span><span class="hl-0"> }),</span><br/><span class="hl-0">        </span><span class="hl-6">status</span><span class="hl-0">,</span><br/><span class="hl-0">        ...</span><span class="hl-6">headers</span><span class="hl-0">,</span><br/><span class="hl-0">        { </span><span class="hl-1">&quot;Content-Type&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-4">getType</span><span class="hl-0">(</span><span class="hl-6">url</span><span class="hl-0">) }</span><br/><span class="hl-0">    );</span><br/><span class="hl-0">}); </span><span class="hl-7">// Promise&lt;[string, 200, { &quot;Content-Type&quot;: &quot;text/markdown&quot; }]&gt;</span>
</code></pre>

<a href="#routing" id="routing" style="color: inherit; text-decoration: none;">
  <h2>Routing</h2>
</a>
<p>Request pathname is one of the most important thing in a request url that tell the server what the client need. The server side application need to binding a handler function to each path pattern. The most simple example of a routing looks like this:</p>
<pre><code class="language-ts"><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-4">main</span><span class="hl-0">() {</span><br/><span class="hl-0">    </span><span class="hl-2">const</span><span class="hl-0"> { </span><span class="hl-3">pathname</span><span class="hl-0"> } = </span><span class="hl-4">useURL</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-2">let</span><span class="hl-0"> </span><span class="hl-6">response</span><span class="hl-0">: </span><span class="hl-9">Respond</span><span class="hl-0">&lt;</span><span class="hl-9">string</span><span class="hl-0"> | </span><span class="hl-9">Uint8Array</span><span class="hl-0"> | </span><span class="hl-9">Readable</span><span class="hl-0">&gt;;</span><br/><span class="hl-0">    </span><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-6">pathname</span><span class="hl-0">.</span><span class="hl-4">match</span><span class="hl-0">(</span><span class="hl-10">/</span><span class="hl-11">^</span><span class="hl-12">(</span><span class="hl-13">\/</span><span class="hl-10">api</span><span class="hl-12">)</span><span class="hl-10">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-6">response</span><span class="hl-0"> = </span><span class="hl-4">apiHandler</span><span class="hl-0">();</span><br/><span class="hl-0">    } </span><span class="hl-5">else</span><span class="hl-0"> </span><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-6">pathname</span><span class="hl-0">.</span><span class="hl-4">match</span><span class="hl-0">(</span><span class="hl-10">/</span><span class="hl-11">^</span><span class="hl-12">(</span><span class="hl-13">\/</span><span class="hl-12">(</span><span class="hl-10">login</span><span class="hl-11">|</span><span class="hl-10">logout</span><span class="hl-12">))</span><span class="hl-10">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-6">response</span><span class="hl-0"> = </span><span class="hl-4">userSessionHandler</span><span class="hl-0">();</span><br/><span class="hl-0">    } </span><span class="hl-5">else</span><span class="hl-0"> </span><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-6">pathname</span><span class="hl-0">.</span><span class="hl-4">match</span><span class="hl-0">(</span><span class="hl-10">/</span><span class="hl-11">^</span><span class="hl-12">(</span><span class="hl-13">\/</span><span class="hl-10">favicon.ico</span><span class="hl-12">)</span><span class="hl-11">$</span><span class="hl-10">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-6">response</span><span class="hl-0"> = </span><span class="hl-4">faviconHandler</span><span class="hl-0">();</span><br/><span class="hl-0">    } </span><span class="hl-5">else</span><span class="hl-0"> </span><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-6">pathname</span><span class="hl-0">.</span><span class="hl-4">match</span><span class="hl-0">(</span><span class="hl-10">/</span><span class="hl-11">^</span><span class="hl-12">(</span><span class="hl-13">\/</span><span class="hl-10">public</span><span class="hl-12">)</span><span class="hl-10">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-6">response</span><span class="hl-0"> = </span><span class="hl-4">staticFileHandler</span><span class="hl-0">();</span><br/><span class="hl-0">    } </span><span class="hl-5">else</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-6">response</span><span class="hl-0"> = </span><span class="hl-4">renderHandler</span><span class="hl-0">();</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-5">return</span><span class="hl-0"> </span><span class="hl-6">response</span><span class="hl-0">;</span><br/><span class="hl-0">}</span>
</code></pre>
<p>In this example, we use <code>if else</code> block to get right value of response by calling corresponding handler, with freesia routing functions, we can do this more elegant.</p>

<a href="#define-routes-separately" id="define-routes-separately" style="color: inherit; text-decoration: none;">
  <h3>Define routes separately</h3>
</a>
<p><code>createRoute(pattern, handler, flags)</code> can define a route. For example:</p>
<blockquote>
<p><code>flags</code> is the RegExp flags, default value is <code>&quot;i&quot;</code></p>
</blockquote>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">helloRt</span><span class="hl-0"> = </span><span class="hl-4">createRoute</span><span class="hl-0">(</span><br/><span class="hl-0">    </span><span class="hl-1">&quot;/hello/:&lt;lang&gt;/:&lt;username&gt;&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    ({ </span><span class="hl-6">lang</span><span class="hl-0">, </span><span class="hl-6">username</span><span class="hl-0"> }) </span><span class="hl-2">=&gt;</span><br/><span class="hl-0">        </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">`</span><span class="hl-2">${</span><span class="hl-4">i18n</span><span class="hl-14">(</span><span class="hl-1">&quot;hello&quot;</span><span class="hl-14">, </span><span class="hl-6">lang</span><span class="hl-14">)</span><span class="hl-2">}</span><span class="hl-1">, </span><span class="hl-2">${</span><span class="hl-6">username</span><span class="hl-2">}</span><span class="hl-1">`</span><span class="hl-0">, </span><span class="hl-8">200</span><span class="hl-0">, {</span><br/><span class="hl-0">            </span><span class="hl-1">&quot;Content-Type&quot;</span><span class="hl-6">:</span><span class="hl-0"> </span><span class="hl-1">&quot;text/plain&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        })</span><br/><span class="hl-0">);</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res</span><span class="hl-0"> = </span><span class="hl-4">helloRt</span><span class="hl-0">(</span><span class="hl-4">useURL</span><span class="hl-0">().</span><span class="hl-6">pathname</span><span class="hl-0">) ?? </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">&quot;No route matched&quot;</span><span class="hl-0">, </span><span class="hl-8">404</span><span class="hl-0">);</span>
</code></pre>
<p>In pattern, there are 4 ways to describe a route parameter:</p>
<ul>
<li><code>:&lt;paramName&gt;</code>: match a string between two <code>/</code>, for example, <code>/hello/:&lt;username&gt;</code> can match <code>/hello/freesia</code> and <code>/hello/freesia/</code> but can&#39;t match <code>/hello/freesia/13</code></li>
<li><code>:{paramName}</code>: match a string greedily, for example, <code>/hello/:{username}/</code> can match <code>/hello/freesia/</code> and <code>/hello/js/freesia/</code> (<code>username</code> is <code>&quot;js/freesia&quot;</code>).</li>
<li><code>:[paramName]</code>: like <code>:{paramName}</code>, but can catch 0 characters string, for example <code>/hello/:[username]</code> can match <code>/hello/</code>, while <code>username</code> is <code>&quot;&quot;</code>.</li>
<li><code>:(paramName)</code>: like <code>:[paramName]</code>, can match <code>/</code> before the parameter, for example <code>/hello/:(username)</code> can match <code>/hello</code>, while <code>username</code> is <code>undefined</code>.</li>
</ul>
<p><code>createRoute</code> will return a route function that receive a string as parameter, if this string matched the pattern, the matched parameters will passed to the handler, and return a value, if no matched, the route function won&#39;t call the handler but return <code>null</code> directly. You can hub many route functions together with <code>??</code> operator as they will return null if not matched, just like this:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res</span><span class="hl-0"> =</span><br/><span class="hl-0">    </span><span class="hl-4">helloRt</span><span class="hl-0">(</span><span class="hl-6">pathname</span><span class="hl-0">) ??</span><br/><span class="hl-0">    </span><span class="hl-4">goodbyeRt</span><span class="hl-0">(</span><span class="hl-6">pathname</span><span class="hl-0">) ??</span><br/><span class="hl-0">    </span><span class="hl-4">updateInfoRt</span><span class="hl-0">(</span><span class="hl-6">pathname</span><span class="hl-0">) ??</span><br/><span class="hl-0">    </span><span class="hl-4">disableUserRt</span><span class="hl-0">(</span><span class="hl-6">pathname</span><span class="hl-0">) ??</span><br/><span class="hl-0">    </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">&quot;No route matched&quot;</span><span class="hl-0">, </span><span class="hl-8">404</span><span class="hl-0">);</span>
</code></pre>
<p>With <code>createSwitcher</code>, you can hub many route functins together:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">switcher</span><span class="hl-0"> = </span><span class="hl-4">createSwitcher</span><span class="hl-0">(</span><br/><span class="hl-0">    </span><span class="hl-6">helloRt</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-6">goodbyeRt</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-6">updateInfoRt</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-6">disableUserRt</span><br/><span class="hl-0">);</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res</span><span class="hl-0"> = </span><span class="hl-4">switcher</span><span class="hl-0">(</span><span class="hl-6">pathname</span><span class="hl-0">) ?? </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">&quot;No route matched&quot;</span><span class="hl-0">, </span><span class="hl-8">404</span><span class="hl-0">);</span>
</code></pre>
<p>This requires all routes functions has the same return type, or specify a template type for <code>createSwitcher&lt;T&gt;</code> that capitable with all route functions.</p>

<a href="#define-routes-at-one-place" id="define-routes-at-one-place" style="color: inherit; text-decoration: none;">
  <h3>Define routes at one place</h3>
</a>
<p><code>createSwRt</code> function provides a way to create routes and hub them to a switcher at the same time, like this:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">switcher</span><span class="hl-0"> = </span><span class="hl-4">createSwRt</span><span class="hl-0">&lt;</span><span class="hl-9">Respond</span><span class="hl-0">&lt;</span><span class="hl-9">BinaryLike</span><span class="hl-0">&gt;&gt;()</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/hello/:&lt;username&gt;&quot;</span><span class="hl-0">, </span><span class="hl-6">helloHandler</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/goodbye/:&lt;username&gt;&quot;</span><span class="hl-0">, </span><span class="hl-6">goodbyeHandler</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/update_info/:&lt;username&gt;/:&lt;operate&gt;/:[restArgs]&quot;</span><span class="hl-0">, </span><span class="hl-6">updateInfoHandler</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/user/:&lt;usrename&gt;/disable&quot;</span><span class="hl-0">, </span><span class="hl-6">disableUserHandler</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">build</span><span class="hl-0">();</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res</span><span class="hl-0"> = </span><span class="hl-4">switcher</span><span class="hl-0">(</span><span class="hl-6">pathname</span><span class="hl-0">) ?? </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">&quot;No route matched&quot;</span><span class="hl-0">, </span><span class="hl-8">404</span><span class="hl-0">);</span>
</code></pre>
<p>The <code>build</code> method will return a switcher function, which returns <code>null</code> (if no routes matched) or the handler return value.</p>
<p><code>fallback</code> method can also return a switcher function, it won&#39;t return null:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">switcher</span><span class="hl-0"> = </span><span class="hl-4">createSwRt</span><span class="hl-0">&lt;</span><span class="hl-9">Respond</span><span class="hl-0">&lt;</span><span class="hl-9">BinaryLike</span><span class="hl-0">&gt;&gt;()</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/hello/:&lt;username&gt;&quot;</span><span class="hl-0">, </span><span class="hl-6">helloHandler</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/goodbye/:&lt;username&gt;&quot;</span><span class="hl-0">, </span><span class="hl-6">goodbyeHandler</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/update_info/:&lt;username&gt;/:&lt;operate&gt;/:[restArgs]&quot;</span><span class="hl-0">, </span><span class="hl-6">updateInfoHandler</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/user/:&lt;usrename&gt;/disable&quot;</span><span class="hl-0">, </span><span class="hl-6">disableUserHandler</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">fallback</span><span class="hl-0">((</span><span class="hl-6">url</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">`No route matched url </span><span class="hl-2">${</span><span class="hl-6">url</span><span class="hl-2">}</span><span class="hl-1">`</span><span class="hl-0">, </span><span class="hl-8">404</span><span class="hl-0">));</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res</span><span class="hl-0"> = </span><span class="hl-4">switcher</span><span class="hl-0">(</span><span class="hl-6">pathname</span><span class="hl-0">);</span>
</code></pre>

<a href="#methods-limit" id="methods-limit" style="color: inherit; text-decoration: none;">
  <h3>Methods limit</h3>
</a>
<p>Use an object instead of a function to dispatch requests to different handlers by request methods. For example,</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">getUserInfoRt</span><span class="hl-0"> = </span><span class="hl-4">createRoute</span><span class="hl-0">(</span><span class="hl-1">&quot;/user/:&lt;username&gt;/info&quot;</span><span class="hl-0">, {</span><br/><span class="hl-0">    </span><span class="hl-6">GET:</span><span class="hl-0"> </span><span class="hl-6">getUserInfoHandler</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-6">PUT:</span><span class="hl-0"> </span><span class="hl-6">updateUserInfoHandler</span><span class="hl-0">,</span><br/><span class="hl-0">});</span>
</code></pre>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">getUserInfoRt</span><span class="hl-0"> = </span><span class="hl-4">createRoute</span><span class="hl-0">(</span><span class="hl-1">&quot;/user/:&lt;username&gt;/info&quot;</span><span class="hl-0">, {</span><br/><span class="hl-0">    </span><span class="hl-6">GET:</span><span class="hl-0"> </span><span class="hl-6">userInfoHandler</span><span class="hl-0">,</span><br/><span class="hl-0">});</span>
</code></pre>
<p>It also works in <code>createSwRt</code>:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">switcher</span><span class="hl-0"> = </span><span class="hl-4">createSwRt</span><span class="hl-0">&lt;</span><span class="hl-9">Respond</span><span class="hl-0">&lt;</span><span class="hl-9">BinaryLike</span><span class="hl-0">&gt;&gt;()</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/hello/:&lt;username&gt;&quot;</span><span class="hl-0">, { </span><span class="hl-6">GET:</span><span class="hl-0"> </span><span class="hl-6">helloHandler</span><span class="hl-0"> })</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/goodbye/:&lt;username&gt;&quot;</span><span class="hl-0">, { </span><span class="hl-6">GET:</span><span class="hl-0"> </span><span class="hl-6">goodbyeHandler</span><span class="hl-0"> })</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/update_info/:&lt;username&gt;/:&lt;operate&gt;/:[restArgs]&quot;</span><span class="hl-0">, {</span><br/><span class="hl-0">        </span><span class="hl-6">PUT:</span><span class="hl-0"> </span><span class="hl-6">updateInfoHandler</span><span class="hl-0">,</span><br/><span class="hl-0">    })</span><br/><span class="hl-0">    .</span><span class="hl-4">route</span><span class="hl-0">(</span><span class="hl-1">&quot;/user/:&lt;usrename&gt;/disable&quot;</span><span class="hl-0">, { </span><span class="hl-6">Put:</span><span class="hl-0"> </span><span class="hl-6">disableUserHandler</span><span class="hl-0"> })</span><br/><span class="hl-0">    .</span><span class="hl-4">fallback</span><span class="hl-0">((</span><span class="hl-6">url</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-4">response</span><span class="hl-0">(</span><span class="hl-1">`No route matched url </span><span class="hl-2">${</span><span class="hl-6">url</span><span class="hl-2">}</span><span class="hl-1">`</span><span class="hl-0">, </span><span class="hl-8">404</span><span class="hl-0">));</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">res</span><span class="hl-0"> = </span><span class="hl-4">switcher</span><span class="hl-0">(</span><span class="hl-6">pathname</span><span class="hl-0">);</span>
</code></pre>

<a href="#hooks" id="hooks" style="color: inherit; text-decoration: none;">
  <h2>Hooks</h2>
</a>
<p>Some values might be used in many functions called during a request handling process, as a result it must be passed through many hierarchies. With Node.js AsyncStorage API, freesia provides some hooks to get values with out pass them in parameters.</p>

<a href="#userequest" id="userequest" style="color: inherit; text-decoration: none;">
  <h3>useRequest</h3>
</a>
<p><code>useRequest</code> hook provide a way to access the request object any where in a request handling process.</p>

<a href="#useurl" id="useurl" style="color: inherit; text-decoration: none;">
  <h3>useURL</h3>
</a>
<p><code>useURL</code> provide a way to access request url. See the overloads <a href="https://qihexiang.github.io/freesia/modules.html#useURL">here</a></p>

<a href="#createcontext" id="createcontext" style="color: inherit; text-decoration: none;">
  <h3>createContext</h3>
</a>
<p><code>createContext</code> provide a way to create a context for a request handling process. See the definitions here:</p>
<p>And examples:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> [</span><span class="hl-3">assignUser</span><span class="hl-0">, </span><span class="hl-3">getUser</span><span class="hl-0">, </span><span class="hl-3">dropUserCtx</span><span class="hl-0">] = </span><span class="hl-4">createContext</span><span class="hl-0">&lt;</span><span class="hl-9">Promise</span><span class="hl-0">&lt;</span><span class="hl-9">User</span><span class="hl-0">&gt;&gt;();</span><br/><br/><span class="hl-7">// UserValidate will access DB and assign a user model to context</span><br/><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-4">UserValidate</span><span class="hl-0">(</span><span class="hl-6">username</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0">, </span><span class="hl-6">token</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0">): </span><span class="hl-9">boolean</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-4">validate</span><span class="hl-0">(</span><span class="hl-6">username</span><span class="hl-0">, </span><span class="hl-6">token</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-4">assignUser</span><span class="hl-0">(</span><span class="hl-3">DB</span><span class="hl-0">.</span><span class="hl-4">query</span><span class="hl-0">({ </span><span class="hl-6">where:</span><span class="hl-0"> { </span><span class="hl-6">username</span><span class="hl-0"> } }));</span><br/><span class="hl-0">        </span><span class="hl-5">return</span><span class="hl-0"> </span><span class="hl-2">true</span><span class="hl-0">;</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-5">return</span><span class="hl-0"> </span><span class="hl-2">false</span><span class="hl-0">;</span><br/><span class="hl-0">}</span><br/><span class="hl-7">// This is a function only be called in a request handling process</span><br/><span class="hl-2">async</span><span class="hl-0"> </span><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-4">getUserName</span><span class="hl-0">(): </span><span class="hl-9">Promise</span><span class="hl-0">&lt;</span><span class="hl-9">string</span><span class="hl-0"> | </span><span class="hl-9">undefined</span><span class="hl-0">&gt; {</span><br/><span class="hl-0">    </span><span class="hl-5">return</span><span class="hl-0"> (</span><span class="hl-5">await</span><span class="hl-0"> </span><span class="hl-4">getUser</span><span class="hl-0">())?.</span><span class="hl-6">username</span><span class="hl-0">;</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#utils" id="utils" style="color: inherit; text-decoration: none;">
  <h2>Utils</h2>
</a>

<a href="#composefn" id="composefn" style="color: inherit; text-decoration: none;">
  <h3>composeFn</h3>
</a>
<p><code>composeFn</code> provides a way to compose many functions together:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> { </span><span class="hl-3">fn</span><span class="hl-0"> } = </span><span class="hl-4">composeFn</span><span class="hl-0">((</span><span class="hl-6">x</span><span class="hl-0">: </span><span class="hl-9">number</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-6">x</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">next</span><span class="hl-0">((</span><span class="hl-6">x</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-9">Math</span><span class="hl-0">.</span><span class="hl-4">pow</span><span class="hl-0">(</span><span class="hl-6">x</span><span class="hl-0">, </span><span class="hl-8">2</span><span class="hl-0">))</span><br/><span class="hl-0">    .</span><span class="hl-4">next</span><span class="hl-0">((</span><span class="hl-6">x</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-6">x</span><span class="hl-0"> / </span><span class="hl-8">2</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">next</span><span class="hl-0">((</span><span class="hl-6">x</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-1">`result is </span><span class="hl-2">${</span><span class="hl-6">x</span><span class="hl-2">}</span><span class="hl-1">`</span><span class="hl-0">);</span><br/><span class="hl-4">fn</span><span class="hl-0">(</span><span class="hl-8">4</span><span class="hl-0">); </span><span class="hl-7">// result is 12.5</span>
</code></pre>

<a href="#computestream" id="computestream" style="color: inherit; text-decoration: none;">
  <h3>computeStream</h3>
</a>
<p><code>computeStream</code> provide a way to compute a value in a stream style process.</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">value</span><span class="hl-0"> = </span><span class="hl-4">computeStream</span><span class="hl-0">(</span><span class="hl-8">4</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">map</span><span class="hl-0">((</span><span class="hl-6">x</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-6">x</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">map</span><span class="hl-0">((</span><span class="hl-6">x</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-9">Math</span><span class="hl-0">.</span><span class="hl-4">pow</span><span class="hl-0">(</span><span class="hl-6">x</span><span class="hl-0">, </span><span class="hl-8">2</span><span class="hl-0">))</span><br/><span class="hl-0">    .</span><span class="hl-4">map</span><span class="hl-0">((</span><span class="hl-6">x</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-6">x</span><span class="hl-0"> / </span><span class="hl-8">2</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">map</span><span class="hl-0">((</span><span class="hl-6">x</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-1">`the result is </span><span class="hl-2">${</span><span class="hl-6">x</span><span class="hl-2">}</span><span class="hl-1">`</span><span class="hl-0">).</span><span class="hl-6">value</span><span class="hl-0">;</span>
</code></pre>
<p>Except <code>map</code> method, there is <code>mapNN</code> method, which you can only deal with non-null values and let <code>null</code> and <code>undefined</code> passed through.</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">value</span><span class="hl-0"> = </span><span class="hl-4">computeStream</span><span class="hl-0">(</span><span class="hl-6">token</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-4">map</span><span class="hl-0">((</span><span class="hl-6">tk</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-4">validator</span><span class="hl-0">(</span><span class="hl-6">tk</span><span class="hl-0">)) </span><span class="hl-7">// validator will return null if not valid</span><br/><span class="hl-0">    .</span><span class="hl-4">mapNN</span><span class="hl-0">((</span><span class="hl-6">username</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-4">queryUser</span><span class="hl-0">(</span><span class="hl-6">username</span><span class="hl-0">)).</span><span class="hl-6">value</span><span class="hl-0">; </span><span class="hl-7">// queryUser will return null if no such user // Promise&lt;User&gt; | null</span>
</code></pre>
<p><code>computeStreamLazy</code> has the same API with <code>computeStream</code>, but functions are called each time accessing value property.</p>

<a href="#createeffect" id="createeffect" style="color: inherit; text-decoration: none;">
  <h3>createEffect</h3>
</a>
<p><code>createEffect</code> can create a wrapper for a function that do some side-effect for the original function. An example looks like this:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-4">add</span><span class="hl-0"> = (</span><span class="hl-6">a</span><span class="hl-0">: </span><span class="hl-9">number</span><span class="hl-0">, </span><span class="hl-6">b</span><span class="hl-0">: </span><span class="hl-9">number</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-6">a</span><span class="hl-0"> + </span><span class="hl-6">b</span><span class="hl-0">;</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">debugWrapper</span><span class="hl-0"> = </span><span class="hl-4">createEffect</span><span class="hl-0">&lt;</span><span class="hl-2">typeof</span><span class="hl-0"> </span><span class="hl-6">add</span><span class="hl-0">&gt;((</span><span class="hl-6">a</span><span class="hl-0">, </span><span class="hl-6">b</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-6">console</span><span class="hl-0">.</span><span class="hl-4">log</span><span class="hl-0">(</span><span class="hl-1">`a is </span><span class="hl-2">${</span><span class="hl-6">a</span><span class="hl-2">}</span><span class="hl-1">, b is </span><span class="hl-2">${</span><span class="hl-6">b</span><span class="hl-2">}</span><span class="hl-1">`</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-5">return</span><span class="hl-0"> (</span><span class="hl-6">result</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-6">console</span><span class="hl-0">.</span><span class="hl-4">log</span><span class="hl-0">(</span><span class="hl-1">`result is </span><span class="hl-2">${</span><span class="hl-6">result</span><span class="hl-2">}</span><span class="hl-1">`</span><span class="hl-0">);</span><br/><span class="hl-0">    };</span><br/><span class="hl-0">});</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">wrappedAdd</span><span class="hl-0"> = </span><span class="hl-4">debugWrapper</span><span class="hl-0">(</span><span class="hl-6">add</span><span class="hl-0">);</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">result</span><span class="hl-0"> = </span><span class="hl-4">wrappedAdd</span><span class="hl-0">(</span><span class="hl-8">1</span><span class="hl-0">, </span><span class="hl-8">2</span><span class="hl-0">);</span><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * logs:</span><br/><span class="hl-7"> * a is 1, b is 2</span><br/><span class="hl-7"> * result is 3</span><br/><span class="hl-7"> */</span>
</code></pre>
<p><code>createEffect4Any</code> is very similar to <code>createEffect</code>, the wrapper created by it can wrap any type of function, but the side effect should be irrelevant with the parameters and return value of the original function. For example:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-4">fib</span><span class="hl-0"> = (</span><span class="hl-6">index</span><span class="hl-0">: </span><span class="hl-9">number</span><span class="hl-0">): </span><span class="hl-9">number</span><span class="hl-0"> </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-6">index</span><span class="hl-0"> === </span><span class="hl-8">0</span><span class="hl-0"> || </span><span class="hl-6">index</span><span class="hl-0"> === </span><span class="hl-8">1</span><span class="hl-0">) </span><span class="hl-5">return</span><span class="hl-0"> </span><span class="hl-8">1</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-5">else</span><span class="hl-0"> </span><span class="hl-5">return</span><span class="hl-0"> </span><span class="hl-4">fib</span><span class="hl-0">(</span><span class="hl-6">index</span><span class="hl-0"> - </span><span class="hl-8">1</span><span class="hl-0">) + </span><span class="hl-4">fib</span><span class="hl-0">(</span><span class="hl-6">index</span><span class="hl-0"> - </span><span class="hl-8">2</span><span class="hl-0">);</span><br/><span class="hl-0">};</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">timeMeasure</span><span class="hl-0"> = </span><span class="hl-4">createEffect4Any</span><span class="hl-0">(() </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">start</span><span class="hl-0"> = </span><span class="hl-2">new</span><span class="hl-0"> </span><span class="hl-9">Date</span><span class="hl-0">().</span><span class="hl-4">getTime</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-5">return</span><span class="hl-0"> () </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-6">console</span><span class="hl-0">.</span><span class="hl-4">log</span><span class="hl-0">(</span><span class="hl-1">`Use </span><span class="hl-2">${</span><span class="hl-2">new</span><span class="hl-14"> </span><span class="hl-9">Date</span><span class="hl-14">().</span><span class="hl-4">getTime</span><span class="hl-14">() </span><span class="hl-0">-</span><span class="hl-14"> </span><span class="hl-6">start</span><span class="hl-2">}</span><span class="hl-1">ms`</span><span class="hl-0">);</span><br/><span class="hl-0">    };</span><br/><span class="hl-0">});</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">fibWithTM</span><span class="hl-0"> = </span><span class="hl-4">timeMeasure</span><span class="hl-0">(</span><span class="hl-6">fib</span><span class="hl-0">);</span><br/><span class="hl-4">fibWithTM</span><span class="hl-0">(</span><span class="hl-8">40</span><span class="hl-0">);</span><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * logs:</span><br/><span class="hl-7"> * Use 1452ms</span><br/><span class="hl-7"> */</span>
</code></pre>

<a href="#createproxy" id="createproxy" style="color: inherit; text-decoration: none;">
  <h3>createProxy</h3>
</a>
<p>createProxy provide a way to proxy a function, which can rewrite the parameters and return values.</p>
<p>For example:</p>
<pre><code class="language-ts"><span class="hl-2">declare</span><span class="hl-0"> </span><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-4">queryUser</span><span class="hl-0">(</span><span class="hl-6">userId</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0">): </span><span class="hl-9">Promise</span><span class="hl-0">&lt;</span><span class="hl-9">User</span><span class="hl-0">&gt;;</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">getUserEmailWrapper</span><span class="hl-0"> = </span><span class="hl-6">createProxy</span><span class="hl-0">&lt;</span><br/><span class="hl-0">    </span><span class="hl-2">typeof</span><span class="hl-0"> </span><span class="hl-6">queryUser</span><span class="hl-0">,</span><br/><span class="hl-0">    (</span><span class="hl-6">username</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0">, </span><span class="hl-6">token</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-9">Promise</span><span class="hl-0">&lt;</span><span class="hl-6">string</span><span class="hl-0"> | </span><span class="hl-2">undefined</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&gt;(</span><span class="hl-2">async</span><span class="hl-0"> (</span><span class="hl-6">username</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0">, </span><span class="hl-6">token</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">userId</span><span class="hl-0"> = </span><span class="hl-5">await</span><span class="hl-0"> </span><span class="hl-4">validator</span><span class="hl-0">(</span><span class="hl-6">username</span><span class="hl-0">, </span><span class="hl-6">token</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-7">// first element null told the proxy not to call the original function</span><br/><span class="hl-0">    </span><span class="hl-7">// second element will be executed to get a fallback value.</span><br/><span class="hl-0">    </span><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-6">userId</span><span class="hl-0"> === </span><span class="hl-2">undefined</span><span class="hl-0">) </span><span class="hl-5">return</span><span class="hl-0"> [</span><span class="hl-2">null</span><span class="hl-0">, () </span><span class="hl-2">=&gt;</span><span class="hl-0"> </span><span class="hl-2">undefined</span><span class="hl-0">];</span><br/><span class="hl-0">    </span><span class="hl-7">// first element pass parameters in an array</span><br/><span class="hl-0">    </span><span class="hl-7">// second element will be called to deal with the original return value.</span><br/><span class="hl-0">    </span><span class="hl-5">else</span><br/><span class="hl-0">        </span><span class="hl-5">return</span><span class="hl-0"> [</span><br/><span class="hl-0">            [</span><span class="hl-6">userId</span><span class="hl-0">],</span><br/><span class="hl-0">            </span><span class="hl-2">async</span><span class="hl-0"> (</span><span class="hl-6">user</span><span class="hl-0">) </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">                </span><span class="hl-5">return</span><span class="hl-0"> (</span><span class="hl-5">await</span><span class="hl-0"> </span><span class="hl-6">user</span><span class="hl-0">).</span><span class="hl-6">email</span><span class="hl-0">;</span><br/><span class="hl-0">            },</span><br/><span class="hl-0">        ];</span><br/><span class="hl-0">});</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">getUserEmail</span><span class="hl-0"> = </span><span class="hl-4">getUserEmailWrapper</span><span class="hl-0">(</span><span class="hl-6">queryUser</span><span class="hl-0">);</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">email</span><span class="hl-0"> = </span><span class="hl-4">getUserEmail</span><span class="hl-0">(</span><span class="hl-6">username</span><span class="hl-0">, </span><span class="hl-6">token</span><span class="hl-0">);</span>
</code></pre>
<p>Look at docs of <a href="https://qihexiang.github.io/freesia/modules.html#createProxy">createProxy</a></p>

<a href="#memorycache" id="memorycache" style="color: inherit; text-decoration: none;">
  <h3>memoryCache</h3>
</a>
<p>memoryCache is a wrapper that can cache return value of a function.</p>
<p>Example:</p>
<pre><code class="language-ts"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">fib</span><span class="hl-0"> = </span><span class="hl-4">memoryCache</span><span class="hl-0">((</span><span class="hl-6">index</span><span class="hl-0">: </span><span class="hl-9">number</span><span class="hl-0">): </span><span class="hl-9">number</span><span class="hl-0"> </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-6">index</span><span class="hl-0"> === </span><span class="hl-8">1</span><span class="hl-0"> || </span><span class="hl-6">index</span><span class="hl-0"> === </span><span class="hl-8">2</span><span class="hl-0">) </span><span class="hl-5">return</span><span class="hl-0"> </span><span class="hl-8">1</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-5">else</span><span class="hl-0"> </span><span class="hl-5">return</span><span class="hl-0"> </span><span class="hl-4">fib</span><span class="hl-0">(</span><span class="hl-6">index</span><span class="hl-0"> - </span><span class="hl-8">1</span><span class="hl-0">) + </span><span class="hl-4">fib</span><span class="hl-0">(</span><span class="hl-6">index</span><span class="hl-0"> - </span><span class="hl-8">2</span><span class="hl-0">);</span><br/><span class="hl-0">});</span>
</code></pre>
<p>This wrapper will receive origin parameters as an array, and compare with used parameters by <code>===</code> operator and <code>Object.is</code> function (same-zero-value comparation).</p>
<blockquote>
<p>Be careful when using objects as parameters, <code>{a: 1} !== {a: 1}</code>, <code>[1,2,3] !== [1,2,3]</code>.</p>
</blockquote>

<a href="#isvoid" id="isvoid" style="color: inherit; text-decoration: none;">
  <h3>isVoid</h3>
</a>
<p><code>isVoid</code> can return if a value is <code>null</code> or <code>undefined</code>.</p>
<pre><code class="language-ts"><span class="hl-2">declare</span><span class="hl-0"> </span><span class="hl-2">let</span><span class="hl-0"> </span><span class="hl-6">value</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0"> | </span><span class="hl-9">undefined</span><span class="hl-0"> | </span><span class="hl-9">null</span><span class="hl-0">;</span><br/><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-4">isVoid</span><span class="hl-0">(</span><span class="hl-6">value</span><span class="hl-0">)) {</span><br/><span class="hl-0">    </span><span class="hl-6">value</span><span class="hl-0">; </span><span class="hl-7">// =&gt; undefined | null</span><br/><span class="hl-0">}</span><br/><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-4">isVoid</span><span class="hl-0">(</span><span class="hl-6">value</span><span class="hl-0">, [</span><span class="hl-2">undefined</span><span class="hl-0">])) {</span><br/><span class="hl-0">    </span><span class="hl-6">value</span><span class="hl-0">; </span><span class="hl-7">// =&gt; undefined</span><br/><span class="hl-0">}</span><br/><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-4">isVoid</span><span class="hl-0">(</span><span class="hl-6">value</span><span class="hl-0">, [</span><span class="hl-2">null</span><span class="hl-0">])) {</span><br/><span class="hl-0">    </span><span class="hl-6">value</span><span class="hl-0">; </span><span class="hl-7">// =&gt; null</span><br/><span class="hl-0">}</span><br/><span class="hl-2">declare</span><span class="hl-0"> </span><span class="hl-2">let</span><span class="hl-0"> </span><span class="hl-6">mayNotDefined</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0"> | </span><span class="hl-9">undefined</span><span class="hl-0">;</span><br/><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-4">isVoid</span><span class="hl-0">(</span><span class="hl-6">mayNotDefined</span><span class="hl-0">)) {</span><br/><span class="hl-0">    </span><span class="hl-6">mayNotDefined</span><span class="hl-0">; </span><span class="hl-7">// =&gt; undefined</span><br/><span class="hl-0">}</span><br/><span class="hl-2">declare</span><span class="hl-0"> </span><span class="hl-2">let</span><span class="hl-0"> </span><span class="hl-6">nullableValue</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0"> | </span><span class="hl-9">null</span><span class="hl-0">;</span><br/><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-4">isVoid</span><span class="hl-0">(</span><span class="hl-6">nullableValue</span><span class="hl-0">)) {</span><br/><span class="hl-0">    </span><span class="hl-6">nullableValue</span><span class="hl-0">; </span><span class="hl-7">// =&gt; null</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#isenum" id="isenum" style="color: inherit; text-decoration: none;">
  <h3>isEnum</h3>
</a>
<p><code>isEnum</code> provides a way to check if a value one of the enum values, for example, a user-input string:</p>
<pre><code class="language-ts"><span class="hl-7">// valid option can be &quot;auto&quot;, &quot;manual&quot;, &quot;default&quot;</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-3">option</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0"> = </span><span class="hl-5">await</span><span class="hl-0"> </span><span class="hl-4">getUserInput</span><span class="hl-0">();</span><br/><span class="hl-5">if</span><span class="hl-0"> (</span><span class="hl-4">isEnum</span><span class="hl-0">(</span><span class="hl-6">option</span><span class="hl-0">, [</span><span class="hl-1">&quot;auto&quot;</span><span class="hl-0">, </span><span class="hl-1">&quot;manual&quot;</span><span class="hl-0">, </span><span class="hl-1">&quot;default&quot;</span><span class="hl-0">])) {</span><br/><span class="hl-0">    </span><span class="hl-6">option</span><span class="hl-0">; </span><span class="hl-7">// =&gt; &quot;auto&quot; | &quot;manual&quot; | &quot;default&quot;</span><br/><span class="hl-0">}</span>
</code></pre>
<p>Support string and number as basic types.</p>

<a href="#others" id="others" style="color: inherit; text-decoration: none;">
  <h3>Others</h3>
</a>
<ul>
<li>resJson</li>
<li>rateLimiter</li>
</ul>
<p>Find their docs in the <a href="https://qihexiang.github.io/freesia/">GitHub Pages</a></p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias"><a href="modules.html#Status" class="tsd-kind-icon">Status</a></li><li class="tsd-kind-type-alias"><a href="modules.html#HttpHeader" class="tsd-kind-icon">Http<wbr/>Header</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Respond" class="tsd-kind-icon">Respond</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Trasnformer" class="tsd-kind-icon">Trasnformer</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#response" class="tsd-kind-icon">response</a></li><li class="tsd-kind-enum"><a href="enums/StatusCode.html" class="tsd-kind-icon">Status<wbr/>Code</a></li><li class="tsd-kind-type-alias"><a href="modules.html#HttpReq" class="tsd-kind-icon">Http<wbr/>Req</a></li><li class="tsd-kind-type-alias"><a href="modules.html#HttpRes" class="tsd-kind-icon">Http<wbr/>Res</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ReqHandler" class="tsd-kind-icon">Req<wbr/>Handler</a></li><li class="tsd-kind-type-alias"><a href="modules.html#BasicRespond" class="tsd-kind-icon">Basic<wbr/>Respond</a></li><li class="tsd-kind-type-alias"><a href="modules.html#EntryPoint" class="tsd-kind-icon">Entry<wbr/>Point</a></li><li class="tsd-kind-function"><a href="modules.html#useRequest" class="tsd-kind-icon">use<wbr/>Request</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#useURL" class="tsd-kind-icon">useURL</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createContext" class="tsd-kind-icon">create<wbr/>Context</a></li><li class="tsd-kind-function"><a href="modules.html#shimHTTP" class="tsd-kind-icon">shimHTTP</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/ConditionInit.html" class="tsd-kind-icon">Condition<wbr/>Init</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Condition.html" class="tsd-kind-icon">Condition</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#condition" class="tsd-kind-icon">condition</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteHandler" class="tsd-kind-icon">Route<wbr/>Handler</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Route" class="tsd-kind-icon">Route</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteHandlerX" class="tsd-kind-icon">Route<wbr/>HandlerX</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteX" class="tsd-kind-icon">RouteX</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createRoute" class="tsd-kind-icon">create<wbr/>Route</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createRouteX" class="tsd-kind-icon">create<wbr/>RouteX</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createRegExp" class="tsd-kind-icon">create<wbr/>Reg<wbr/>Exp</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteChainInit" class="tsd-kind-icon">Route<wbr/>Chain<wbr/>Init</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteChainAdder" class="tsd-kind-icon">Route<wbr/>Chain<wbr/>Adder</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteChainFallback" class="tsd-kind-icon">Route<wbr/>Chain<wbr/>Fallback</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteChain" class="tsd-kind-icon">Route<wbr/>Chain</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteChainInitX" class="tsd-kind-icon">Route<wbr/>Chain<wbr/>InitX</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteChainAdderX" class="tsd-kind-icon">Route<wbr/>Chain<wbr/>AdderX</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteChainFallbackX" class="tsd-kind-icon">Route<wbr/>Chain<wbr/>FallbackX</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteChainX" class="tsd-kind-icon">Route<wbr/>ChainX</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createSwRt" class="tsd-kind-icon">create<wbr/>Sw<wbr/>Rt</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createSwRtX" class="tsd-kind-icon">create<wbr/>Sw<wbr/>RtX</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createSwitcher" class="tsd-kind-icon">create<wbr/>Switcher</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createSwitcherX" class="tsd-kind-icon">create<wbr/>SwitcherX</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Empty" class="tsd-kind-icon">Empty</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#NonGreedy" class="tsd-kind-icon">Non<wbr/>Greedy</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#GreedyAtLeastOne" class="tsd-kind-icon">Greedy<wbr/>At<wbr/>Least<wbr/>One</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#GreedyAtLeastZero" class="tsd-kind-icon">Greedy<wbr/>At<wbr/>Least<wbr/>Zero</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#GreedyAtLeastZeroRemoveSlash" class="tsd-kind-icon">Greedy<wbr/>At<wbr/>Least<wbr/>Zero<wbr/>Remove<wbr/>Slash</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#ParamFlag" class="tsd-kind-icon">Param<wbr/>Flag</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RoutePattern" class="tsd-kind-icon">Route<wbr/>Pattern</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#RouteParam" class="tsd-kind-icon">Route<wbr/>Param</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#MaybePromise" class="tsd-kind-icon">Maybe<wbr/>Promise</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Composer.html" class="tsd-kind-icon">Composer</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#baseCompose" class="tsd-kind-icon">base<wbr/>Compose</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#composeFn" class="tsd-kind-icon">compose<wbr/>Fn</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#ComputeStream" class="tsd-kind-icon">Compute<wbr/>Stream</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#computeStream" class="tsd-kind-icon">compute<wbr/>Stream</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#computeStreamLazy" class="tsd-kind-icon">compute<wbr/>Stream<wbr/>Lazy</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#fillNullable" class="tsd-kind-icon">fill<wbr/>Nullable</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Fn" class="tsd-kind-icon">Fn</a></li><li class="tsd-kind-type-alias"><a href="modules.html#AsyncFn" class="tsd-kind-icon">Async<wbr/>Fn</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#BeforeHookTuple" class="tsd-kind-icon">Before<wbr/>Hook<wbr/>Tuple</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createProxy" class="tsd-kind-icon">create<wbr/>Proxy</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#echo" class="tsd-kind-icon">echo</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#asyncEcho" class="tsd-kind-icon">async<wbr/>Echo</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createEffect" class="tsd-kind-icon">create<wbr/>Effect</a></li><li class="tsd-kind-function"><a href="modules.html#createEffect4Any" class="tsd-kind-icon">create<wbr/>Effect4<wbr/>Any</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#isEnum" class="tsd-kind-icon">is<wbr/>Enum</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Void" class="tsd-kind-icon">Void</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Voids" class="tsd-kind-icon">Voids</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#isVoid" class="tsd-kind-icon">is<wbr/>Void</a></li><li class="tsd-kind-interface"><a href="interfaces/HasToJSON.html" class="tsd-kind-icon">Has<wbr/>ToJSON</a></li><li class="tsd-kind-type-alias"><a href="modules.html#BasicJSONTypes" class="tsd-kind-icon">BasicJSONTypes</a></li><li class="tsd-kind-type-alias"><a href="modules.html#JsonObject" class="tsd-kind-icon">Json<wbr/>Object</a></li><li class="tsd-kind-type-alias"><a href="modules.html#JsonArray" class="tsd-kind-icon">Json<wbr/>Array</a></li><li class="tsd-kind-type-alias"><a href="modules.html#JsonType" class="tsd-kind-icon">Json<wbr/>Type</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#resJson" class="tsd-kind-icon">res<wbr/>Json</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#CacheMap" class="tsd-kind-icon">Cache<wbr/>Map</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#memoryCache" class="tsd-kind-icon">memory<wbr/>Cache</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#limitRate" class="tsd-kind-icon">limit<wbr/>Rate</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>